// Code generated by GG version . DO NOT EDIT.

//go:build !gg
// +build !gg

package config

import (
	"errors"
	"fmt"
	config "github.com/555f/gg/examples/rest-service/internal/config"
	gostrings "github.com/555f/go-strings"
	gomultierror "github.com/hashicorp/go-multierror"
	"os"
)

func New() (c *config.Config, errs error) {
	c = &config.Config{}
	if s, ok := os.LookupEnv("ADDR"); ok {
		c.Addr = s
		if c.Addr == "" {
			errs = gomultierror.Append(errs, errors.New("env ADDR empty"))
		}
	} else {
		errs = gomultierror.Append(errs, errors.New("env ADDR not set"))
	}
	if s, ok := os.LookupEnv("PORT"); ok {
		v, err := gostrings.ParseInt[int](s, 10, 64)
		if err != nil {
			errs = gomultierror.Append(errs, fmt.Errorf("env PORT failed parse: %w", err))
		}
		c.Port = v
		if c.Port == 0 {
			errs = gomultierror.Append(errs, errors.New("env PORT empty"))
		}
	} else {
		errs = gomultierror.Append(errs, errors.New("env PORT not set"))
	}
	return
}
